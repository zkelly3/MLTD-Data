{% extends "base.html" %}
{% block title %}卡池列表{% endblock %}
{% block head %}
{[ super() ]}
<link rel="stylesheet" href="{[ url_for('static', filename='css/gashas.css') ]}">
<script src="{[ url_for('static', filename='js/gashas.js') ]}"></script>
{% endblock %}

{% block navbar %}
{[ super() ]}
<button class="btn btn-outline-light ms-auto" v-on:click="changeLanguage()" :disabled="notBoth">{{ panelWord }}</button>
{% endblock %}

{% block content %}
<div class="row">
<nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '>';">
  <ol class="breadcrumb">
    <li class="breadcrumb-item active" aria-current="page">所有卡池</li>
  </ol>
</nav>
</div>
<div class="row g-1 mb-2" v-for="(attr, key) in filters">
  <div class="col"><div class="input-group">
      <div class="input-group-text">
        <input class="form-check-input me-1" type="checkbox" :id="'check-'+key" v-model="attr.enabled" />
        <label class="form-check-label" for="'check-'+key">{{ attr.label }}</label>
      </div>
      <input class="form-control" type="text" v-if="attr.type === 'search'" v-model="attr.value" placeholder="請輸入卡池名稱"/>
      <div class="input-group-text" style="backgroundColor: white;" v-if="attr.type === 'check'">
        <div class="form-check me-2" v-for="opt in shownOptions(attr.options)">
          <input class="form-check-input" type="checkbox" :value="opt.val" :id="'check-'+opt.val" v-model="attr.selected">
          <label class="form-check-label" :for="'check-'+opt.val">
            {{ opt.text }}
          </label>
        </div>
      </div>
  </div></div>
</div>
<table class="table mt-3 align-middle" id="gasha">
  <tbody><tr v-for="gasha in pageFltGashas">
    <td><a :href="gasha.url">{{ gasha.name }}</a></td>
    <td>{{ gasha.start }}</td>
    <td>{{ gasha.over }}</td>
  </tr></tbody>
</table>
<div class="row g-1">
  <div class="col-lg-2">
    <select class="form-select" v-model.number="paging.purPage">
      <option v-for="opt in paging.onePageList" :value="opt">{{ opt }}</option>
    </select>
  </div>
  <nav aria-label="gasha_pagination">
    <ul class="pagination justify-content-end">
      <li :class="{'page-item': true, disabled: calcPagination.noPrev}">
        <a class="page-link" href="#" v-on:click="prevPage()" :aria-disabled="calcPagination.noPrev">Previous</a>
      </li>
      <li v-for="page in calcPagination.pages" :class="{'page-item': true, active: page.isCurrent}">
        <span class="page-link" v-if="page.isCurrent">{{ page.val }}</span>
        <a class="page-link" href="#" v-on:click="changePage(page.val)" v-else>{{ page.val }}</a>
      </li>
      <li :class="{'page-item': true, disabled: calcPagination.noNext}">
        <a class="page-link" href="#" v-on:click="nextPage()" :aria-disabled="calcPagination.noNext">Next</a>
      </li>
    </ul>
  </nav>
</div>
{% endblock %}

{% block body %}
{[ super() ]}
<script type="application/json" id="gashas_json">{[gashas|safe]}</script>
<script type="application/json" id="types_json">{[types|safe]}</script>
{% endblock %}
